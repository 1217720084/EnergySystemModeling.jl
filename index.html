<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>EnergySystemModel.jl · EnergySystemModel</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href><img class="logo" src="assets/logo.svg" alt="EnergySystemModel logo"/></a><h1>EnergySystemModel</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href>EnergySystemModel.jl</a><ul class="internal"><li><a class="toctext" href="#Model-1">Model</a></li><li><a class="toctext" href="#Input-1">Input</a></li><li><a class="toctext" href="#API-1">API</a></li><li><a class="toctext" href="#References-1">References</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>EnergySystemModel.jl</a></li></ul><a class="edit-page" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>EnergySystemModel.jl</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="EnergySystemModel.jl-1" href="#EnergySystemModel.jl-1">EnergySystemModel.jl</a></h1><p>Documentation for EnergySystemModel.jl</p><h2><a class="nav-anchor" id="Model-1" href="#Model-1">Model</a></h2><p>Mathematical reference for the energy system model. The model presented here is based on the model in <a href="#footnote-1">[1]</a>. The units are expressed in the square brackets.</p><h3><a class="nav-anchor" id="Utility-1" href="#Utility-1">Utility</a></h3><p>We will calculate annualised costs using <a href="https://en.wikipedia.org/wiki/Equivalent_annual_cost"><em>equivalent annual cost (EAC)</em></a> formula.</p><div>\[EAC(c,r,n) = \frac{c}{a_{n,r}},\quad a_{n,r} = \frac{1-(1+r)^{-n}}{r},\quad a_{n,0}=n\]</div><p>where <span>$c$</span> is the net present cost of the project, <span>$n$</span> is the number of payments and <span>$r$</span> is the interest rate.</p><h3><a class="nav-anchor" id="Indices-and-Sets-1" href="#Indices-and-Sets-1">Indices and Sets</a></h3><ul><li><span>$g∈G$</span>: Generation technologies</li><li><span>$G^r⊆G$</span>: Renewable generation technologies</li><li><span>$n∈N$</span>: Nodes</li><li><span>$l∈L$</span>: Transmission lines, bidimensional vectors <span>$(i,j)$</span> where <span>$i,j∈N$</span></li><li><span>$t∈T$</span>: Time steps, depending on the number of clusters per month</li><li><span>$s∈S$</span>: Storage technologies</li></ul><h3><a class="nav-anchor" id="Parameters-1" href="#Parameters-1">Parameters</a></h3><p>Constant parameters</p><ul><li><span>$κ∈[0,1]$</span>: Renewables participation required by the system</li><li><span>$C$</span>: Shedding cost [€/MWh]</li><li><span>$\bar{C}$</span>: Shedding capacity [€/MWh]</li><li><span>$r≥0$</span>: Interest rate</li></ul><p>Time clustered parameters</p><ul><li><span>$τ$</span>: Number of time slices per month</li><li><span>$τ_{t}$</span>: Duration of time period <span>$t$</span> [h]</li><li><span>$Q_{g,n}$</span>: Initial capacity [MW]</li><li><span>$A_{g,n,t}∈[0,1]$</span>: Availability of technology <span>$g$</span> per node <span>$n$</span> at time step <span>$t$</span></li><li><span>$D_{n,t}$</span>: Clustered demand per node <span>$n$</span> per time step <span>$t$</span>  [MWh]</li></ul><p>Generation technology parameters</p><ul><li><span>$I_g^G$</span>: Annualised investment cost for generation per MW of technology <span>$g$</span> [€/MW]. Calculated as <span>$I_g^G=EAC(c_g, t_g, r)$</span> where <span>$c_g$</span> is the cost and <span>$t_g$</span> is lifetime of technology <span>$g$</span>.</li><li><span>$M_g^G$</span>: Annualised maintenance cost for generation per MW of technology <span>$g$</span> [€/MW]</li><li><span>$C_g^G$</span>: Operational cost per MWh of technology <span>$g$</span> [€/MWh]. Calculated as <span>$c_g/c&#39;_g/1000$</span> where <span>$c_g$</span> is fuel cost 1 and <span>$c&#39;_g$</span> fuel cost 2 of technology <span>$g.$</span></li><li><span>$r_g^{-}$</span>: Relative ramp-down limit of technology <span>$g$</span></li><li><span>$r_g^{+}$</span>: Relative ramp-up limit of technology <span>$g$</span></li></ul><p>Transmission parameters</p><ul><li><span>$I_l^F$</span>: Annualised investment cost for transmission per line <span>$l$</span> [€/MW]. Calculated as <span>$I_l^F=EAC(c_l⋅d_l + M_l^F, t_l, r)$</span> where <span>$c_l$</span> is cost per kilometer and <span>$d_l$</span> distance in kilometers, <span>$t_l$</span> the lifetime of transmission line <span>$l.$</span></li><li><span>$M_l^F$</span>: Annualised maintenance cost for transmission per line <span>$l$</span> [€/MW]</li><li><span>$C_l^F$</span>: Transmission cost per line <span>$l$</span> [€/MWh]</li><li><span>$B_l$</span>: Susceptance per line <span>$l$</span></li></ul><p>Storage parameters</p><ul><li><span>$I_s^S$</span>: Annualised investment cost of storage technology <span>$s$</span> per MW [€/MWh]. Calculated as <span>$I_s^S=EAC(c_s, t_s, r)$</span> where <span>$c_s$</span> is the cost and <span>$t_s$</span> the lifetime of storage <span>$s.$</span></li><li><span>$C_s^S$</span>: Storage operational cost of storage technology <span>$s$</span> [€/MW]</li><li><span>$b_{s,n}^0$</span>: Initial capacity of storage <span>$s$</span> at node <span>$n$</span> [MWh]</li><li><span>$ξ_s$</span>: Round-trip efficiency of storage technology <span>$s$</span></li></ul><h3><a class="nav-anchor" id="Variables-1" href="#Variables-1">Variables</a></h3><p>Generation technology variables</p><ul><li><span>$p_{g,n,t}≥0$</span>: Dispatch from technology <span>$g$</span> at node <span>$n$</span> in each time step <span>$t$</span> [MWh]</li><li><span>$\bar{p}_{g,n}≥0$</span>: Generation capacity invested in each technology <span>$g$</span> at node <span>$n$</span> [MW]</li></ul><p>Shedding variables</p><ul><li><span>$σ_{n,t}≥0$</span>: Loss of load at node <span>$n$</span> in each time step <span>$t$</span> [MWh]</li></ul><p>Transmission variables</p><ul><li><span>$f_{l,t}$</span>: Transmission flow per line <span>$l$</span> in each time step <span>$t$</span> [MWh]</li><li><span>$|f_{l,t}|$</span>: Absolute value of transmission flow per line <span>$l$</span> in each time step <span>$t$</span> [MWh]</li><li><span>$\bar{f}_l$</span>: Transmission capacity per line <span>$l$</span> [MW]</li></ul><p>Storage variables</p><ul><li><span>$b_{s,n,t}≥0$</span>: Storage level of storage <span>$s$</span> at node <span>$n$</span> in each time step <span>$t$</span> [MWh]</li><li><span>$\bar{b}_{s,n}≥0$</span>: Storage capacity of storage <span>$s$</span> at node <span>$n$</span> [MW]</li><li><span>$b_{s,n,t}^{+}≥0$</span>: Charging of storage <span>$s$</span> at node <span>$n$</span> in each time step <span>$t$</span> [MW]</li><li><span>$b_{s,n,t}^{-}≥0$</span>: Discharging of storage <span>$s$</span> at node <span>$n$</span> in each time step <span>$t$</span> [MW]</li></ul><p>Voltage angle variables</p><ul><li><span>$θ_{n,t}≥0$</span>: Voltage angle at node <span>$n$</span> in each time step <span>$t$</span></li><li><span>$θ&#39;_{n,t}≥0$</span>: Voltage angle at node <span>$n$</span> in each time step <span>$t$</span></li></ul><h3><a class="nav-anchor" id="Objective-1" href="#Objective-1">Objective</a></h3><p>The objective is</p><div>\[\mathrm{minimize}_{p_{g,t}, \bar{p}_g, σ_{t}, f_{l,t}, \bar{f}_l, b_{s,n,t}^{+}, b_{s,n,t}^{-}} (f_1 + ... + f_7),\]</div><p>where the individual objectives are</p><div>\[f_1=\sum_{g,n} (I_g^G+M_g^G)\bar{p}_{g,n}\]</div><div>\[f_2=\sum_{g,n,t} C_g^G p_{g,t,n} τ_{t}\]</div><div>\[f_3=\sum_{n,t} C σ_{n,t} τ_{t}\]</div><div>\[f_4=\sum_{l} (I_l^F+M_l^F) \bar{f}_l\]</div><div>\[f_5=\sum_{l,t} C_l^F ⋅ |f_{l,t}| τ_{t}\]</div><div>\[f_6=\sum_{s,n} I_s^S \bar{b}_{s,n}\]</div><div>\[f_7=\sum_{s,n,t} C_s^S (b_{s,n,t}^{+}+b_{s,n,t}^{-}) τ_{t}\]</div><h3><a class="nav-anchor" id="Constraints-1" href="#Constraints-1">Constraints</a></h3><h4><a class="nav-anchor" id="Balance-1" href="#Balance-1">Balance</a></h4><p>Energy balance <span>$t=1$</span></p><div>\[\sum_{g} p_{g,n,t} + σ_{n,t} + \sum_{(i,j)=l∈L∣j=n} f_{l,t} - \sum_{(i,j)=l∈L∣i=n} f_{l,t} + ξ_s b_{s,n,t} = D_{n,t},\quad ∀s,n,t=1\]</div><p>Energy balance <span>$t&gt;1$</span></p><div>\[\sum_{g} p_{g,n,t} + σ_{n,t} + \sum_{(i,j)=l∈L∣j=n} f_{l,t} - \sum_{(i,j)=l∈L∣i=n} f_{l,t} + ξ_s (b_{s,n,t}-b_{s,n,t-1}) = D_{n,t},\quad ∀s,n,t&gt;1\]</div><h4><a class="nav-anchor" id="Generation-/-Shedding-1" href="#Generation-/-Shedding-1">Generation / Shedding</a></h4><p>Generation capacity</p><div>\[p_{g,n,t} ≤ A_{g,n,t} (Q_{g,n} + \bar{p}_{g,n}),\quad ∀g,n,t\]</div><p>Minimum renewables share</p><div>\[\sum_{g∈G^r,n,t} p_{g,n,t} ≥ κ \sum_{g,n,t} p_{g,n,t}\]</div><p>Shedding upper bound</p><div>\[σ_{n,t} ≤ \bar{C} D_{n,t},\quad ∀n,t\]</div><h4><a class="nav-anchor" id="Transmission-1" href="#Transmission-1">Transmission</a></h4><p>Transmission capacity</p><div>\[f_{l,t} ≤ \bar{f}_l,\quad ∀l,t\]</div><div>\[f_{l,t} ≥ -\bar{f}_l,\quad ∀l,t\]</div><p>The absolute value of the transmission</p><div>\[|f_{l,t}|≥f_{l,t},\quad ∀l,t\]</div><div>\[|f_{l,t}|≥-f_{l,t},\quad ∀l,t\]</div><h4><a class="nav-anchor" id="Storage-1" href="#Storage-1">Storage</a></h4><p>Charge and discharge at <span>$t=1$</span></p><div>\[\begin{aligned}
&amp; b_{s,n,t}^{+}≥b_{s,n,t} - b_{s,n}^0,\quad ∀s,n,t=1 \\
&amp; b_{s,n,t}^{-}≥b_{s,n,t} - b_{s,n}^0,\quad ∀s,n,t=1
\end{aligned}\]</div><p>Charge and discharge at <span>$t&gt;1$</span></p><div>\[\begin{aligned}
&amp; b_{s,n,t}^{+}≥b_{s,n,t} - b_{s,n,t-1},\quad ∀s,n,t&gt;1 \\
&amp; b_{s,n,t}^{-}≥b_{s,n,t} - b_{s,n,t-1},\quad ∀s,n,t&gt;1
\end{aligned}\]</div><p>Storage capacity</p><div>\[b_{s,n,t}≤\bar{b}_{s,n},\quad ∀s,n,t\]</div><p>Storage continuity</p><div>\[b_{s,n,t=1} = b_{s,n,t=t_{end}},\quad ∀s,n\]</div><h4><a class="nav-anchor" id="Ramping-Limits-1" href="#Ramping-Limits-1">Ramping Limits</a></h4><div>\[\begin{aligned}
p_{g,n,t} - p_{g,n,t-1} &amp;≥ r_g^{+}, \quad ∀g,n,t&gt;1 \\
p_{g,n,t} - p_{g,n,t-1} &amp;≤ -r_g^{-}, \quad ∀g,n,t&gt;1
\end{aligned}\]</div><h4><a class="nav-anchor" id="Voltage-Angles-1" href="#Voltage-Angles-1">Voltage Angles</a></h4><div>\[(θ_{n,t} - θ_{n&#39;,t}&#39;) B_l = p_{g,n,t} - p_{g,n&#39;,t}, \quad ∀g,l,n,n&#39;,t&gt;1\]</div><h2><a class="nav-anchor" id="Input-1" href="#Input-1">Input</a></h2><p>Users can provide input parameters for different instances as a directory containing CSV and JSON files, and also include a README file, which describes the instance. Users can distribute instances as <code>.zip</code> archives.</p><p>We have <code>instance</code> directory, with files:</p><ul><li><code>indices.json</code> – Indices.</li><li><code>nodes/</code> – Time clustered data from the nodes.<ul><li><code>1.csv</code></li><li><code>2.csv</code></li><li>...</li></ul></li><li><code>constants.json</code> – Constant parameters.</li><li><code>transmission.csv</code> – Transmission parameters.</li><li><code>technology.csv</code> – Technology parameters.</li><li><code>storage.csv</code> – Storage parameters.</li><li><code>README.md</code> – Description about the instance.</li></ul><p>The parameters naming convention is documented in the parameters section.</p><h2><a class="nav-anchor" id="API-1" href="#API-1">API</a></h2><h3><a class="nav-anchor" id="Model-2" href="#Model-2">Model</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.Parameters" href="#EnergySystemModel.Parameters"><code>EnergySystemModel.Parameters</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Input indices and parameters for the model.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/model.jl#L16">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.Specs" href="#EnergySystemModel.Specs"><code>EnergySystemModel.Specs</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Specifation for which constraints to include to the model. Constraints that are not specified are included by default.</p><p><strong>Arguments</strong></p><ul><li><code>renewable_target::Bool</code>: Whether to include renewables target constraint.</li><li><code>storage::Bool</code>: Whether to include storage constraints.</li><li><code>ramping::Bool</code>: Whether to include ramping constraints.</li><li><code>voltage_angles::Bool</code>: Whether to include voltage angle constraints.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/55e36cc308b66d3472990a06b2797f9f9154ea0a/base/#L0-L10">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.load_parameters" href="#EnergySystemModel.load_parameters"><code>EnergySystemModel.load_parameters</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Loads the instance parameters from file. Returns an instance of Parameters struct.</p><p><strong>Arguments</strong></p><ul><li><code>instance_path::AbstractString</code>: Path to the instance directory.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/model.jl#L64-L71">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.energy_system_model" href="#EnergySystemModel.energy_system_model"><code>EnergySystemModel.energy_system_model</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Creates the energy system model. Returns JuMP model.</p><p><strong>Arguments</strong></p><ul><li><code>parameters::Parameters</code></li><li><code>specs::Specs</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/model.jl#L153-L160">source</a></section><h3><a class="nav-anchor" id="Plotting-1" href="#Plotting-1">Plotting</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_objective_values" href="#EnergySystemModel.plot_objective_values"><code>EnergySystemModel.plot_objective_values</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot objective value and individual objective values.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L74">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_generation_dispatch" href="#EnergySystemModel.plot_generation_dispatch"><code>EnergySystemModel.plot_generation_dispatch</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot generation dispatch.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L86">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_generation_capacities" href="#EnergySystemModel.plot_generation_capacities"><code>EnergySystemModel.plot_generation_capacities</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot generation capacities.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L94">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_transmission_flow" href="#EnergySystemModel.plot_transmission_flow"><code>EnergySystemModel.plot_transmission_flow</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot transmission flow.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L100">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_transmission_capacities" href="#EnergySystemModel.plot_transmission_capacities"><code>EnergySystemModel.plot_transmission_capacities</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot transmission capacities.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L108">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_storage" href="#EnergySystemModel.plot_storage"><code>EnergySystemModel.plot_storage</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot storage.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L113">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_storage_capacities" href="#EnergySystemModel.plot_storage_capacities"><code>EnergySystemModel.plot_storage_capacities</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot storage capacities.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L120">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.plot_loss_of_load" href="#EnergySystemModel.plot_loss_of_load"><code>EnergySystemModel.plot_loss_of_load</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot loss of load.</p></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/plotting.jl#L126">source</a></section><h3><a class="nav-anchor" id="Utility-2" href="#Utility-2">Utility</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="EnergySystemModel.equivalent_annual_cost" href="#EnergySystemModel.equivalent_annual_cost"><code>EnergySystemModel.equivalent_annual_cost</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Equivalent annual cost (EAC)</p><p><strong>Arguments</strong></p><ul><li><code>cost::Real</code>: Net present value of a project.</li><li><code>n::Integer</code>: Number of payments.</li><li><code>r::Real</code>: Interest rate.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/jaantollander/EnergySystemModel.jl/blob/ef87125775c4d2c9f2eeefc5c13017642d041116/src/model.jl#L4-L11">source</a></section><h2><a class="nav-anchor" id="References-1" href="#References-1">References</a></h2><div class="footnote" id="footnote-1"><a href="#footnote-1"><strong>[1]</strong></a><p>Pineda, S., &amp; Morales, J. M. (2018). Chronological time-period clustering for optimal capacity expansion planning with storage. IEEE Transactions on Power Systems, 33(6), 7162–7170. https://doi.org/10.1109/TPWRS.2018.2842093</p></div><footer><hr/></footer></article></body></html>
